/*! SimpleStateManager | license: MIT | version: 2.4.0 | build date: 2014-11-03 */
!function(a,b,c,d){"function"==typeof define&&define.amd?define(function(){return d(root)}):"object"==typeof exports?module.exports=d:a.ssm=d(a,b,c)}(window,document,void 0,function(a,b){"use strict";var c=!1,d={},e=[],f=0,g=[],h=10,i=null,j=[],k=function(){return"function"==typeof a.matchMedia&&"undefined"!=typeof a.matchMedia("(width: 100px)").addListener?!0:!1}(),l=function(){clearTimeout(i),i=setTimeout(m,h)},m=function(){f=p(),n(f)},n=function(a){for(var b=e.length,c=j.length,f=[],h=[],i=[],k=[],l=!0,m=d,n=0;b>n;n++){l=!0,m.state=e[n],m.browserWidth=a;for(var o=0;c>o;o++)if("undefined"!=typeof m.state[j[o].name]&&(m.callback=j[o].test,m.callback()===!1)){l=!1;break}l?(k=k.concat(e[n].onFirstRun),e[n].onFirstRun=[],t(g,e[n])?h=h.concat(e[n].onResize):(g.push(e[n]),i=i.concat(e[n].onEnter))):t(g,e[n])&&(f=f.concat(e[n].onLeave),g=u(g,e[n]))}v(k),v(f),v(i),v(h)};d.browserResize=n,d.getBrowserWidth=function(){return f},d.addState=function(a){var b={id:o(),minWidth:0,maxWidth:999999,onEnter:[],onLeave:[],onResize:[],onFirstRun:[]};return a=q(b,a),"function"==typeof a.onEnter&&(a.onEnter=[a.onEnter]),"function"==typeof a.onLeave&&(a.onLeave=[a.onLeave]),"function"==typeof a.onResize&&(a.onResize=[a.onResize]),"function"==typeof a.onFirstRun&&(a.onFirstRun=[a.onFirstRun]),e.push(a),e=r(e,"minWidth"),this},d.updateState=function(a,b){for(var c=e.length-1;c>=0;c--)e[c].id===a&&(e[c]=q(e[c],b));return this},d.removeState=function(a){for(var b=e.length-1;b>=0;b--)e[b].id===a&&e.splice(b,1);return this},d.removeStates=function(a){for(var b=a.length-1;b>=0;b--)d.removeState(a[b]);return this},d.removeAllStates=function(){return e=g=[],this},d.addStates=function(a){for(var b=a.length-1;b>=0;b--)d.addState(a[b]);return this},d.getStates=function(a){var b=null,c=[];if("undefined"==typeof a)return e;b=a.length;for(var d=0;b>d;d++)c.push(s(a[d]));return c},d.addConfigOption=function(a){var b={name:"",test:null};a=q(b,a),""!==a.name&&null!==a.test&&j.push(a)},d.getConfigOption=function(a){if("string"!=typeof a)return j;for(var b=j.length-1;b>=0;b--)if(j[b].name===a)return j[b]},d.removeConfigOption=function(a){for(var b=j.length-1;b>=0;b--)j[b].name===a&&j.splice(b,1)},d.isActive=function(a){for(var b=0;b<g.length;b++)if(g[b].id===a)return!0;return!1},d.getCurrentStates=function(){return g},d.setResizeTimeout=function(a){h=a},d.getResizeTimeout=function(){return h},d.ready=function(){return f=p(),c===!1&&(a.attachEvent?a.attachEvent("onresize",l):a.addEventListener&&a.addEventListener("resize",l,!0),c=!0),n(f),this};var o=function(){for(var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;10>c;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},p=function(){var c=0;return k?a.matchMedia("(width:"+a.innerWidth+"px)").matches?c=a.innerWidth:a.matchMedia("(width:"+a.innerWidth+"px)").matches?c=a.outerWidth:a.matchMedia("(width:"+b.body.clientWidth+"px)").matches&&(c=b.body.clientWidth):"number"==typeof b.body.clientWidth?c=b.body.clientWidth:"number"==typeof a.innerWidth?c=a.innerWidth:b.documentElement&&b.documentElement.clientWidth&&(c=b.documentElement.clientWidth),c},q=function(a,b){var c={};for(var d in a)c[d]=a[d];for(var e in b)c[e]=b[e];return c},r=function(a,b){return a.sort(function(a,c){var d=a[b],e=c[b];return e>d?-1:d>e?1:0})},s=function(a){for(var b=e.length-1;b>=0;b--)if(e[b].id===a)return e[b]},t=function(a,b){for(var c=0;c<a.length;c++)if(a[c]===b)return!0},u=function(a,b){for(var c=a.length,d=0;c>d;d++)a[d]===b&&a.splice(d,1);return a},v=function(a){for(var b=a.length,c=0;b>c;c++)a[c]()};return d.addConfigOption({name:"minWidth",test:function(){return"number"==typeof this.state.minWidth&&this.state.minWidth<=this.browserWidth?!0:!1}}),d.addConfigOption({name:"maxWidth",test:function(){return"number"==typeof this.state.maxWidth&&this.state.maxWidth>=this.browserWidth?!0:!1}}),d});